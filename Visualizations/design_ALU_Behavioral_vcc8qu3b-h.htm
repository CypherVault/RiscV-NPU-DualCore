<!DOCTYPE html public "-//W3C//DTD HTML 4.0 Final//EN">
<html>
<head>
<meta charset="utf-8">
<meta generator="Ease 9.5 Revision 5">
<link rel="stylesheet" type="text/css" href="easestyle.css">
<title>Architecture design.ALU.Behavioral</title>
</head>
<body>
<div class="hdlw_banner"><a href="https://www.hdlworks.com">Generated by <b>Ease</b> for <i>chrisnielsen</i> on Fri Dec 13 09:05:10 2024</a></div>

<div class="hdlw_nav"><table><tr><td><a href="javascript:history.go(-1)"><img src="images/arrow_left.png">Back</a></td>
<td><a href="index.htm"><img src="images/ease.png">Index</a></td>
<td><a href="design_nus4l6t2.htm"><img src="images/library.png">design</a></td>
<td><a href="design_ALU_cs98qu8d.htm"><img src="images/symbol.png">ALU</a></td>
</tr>
</table>
</div>
<h1>Documentation for architecture design.ALU.Behavioral</h1><table class="tableContents"><tr>
<td><a href="design_ALU_Behavioral_vcc8qu3b.htm">Contents</a></td>
<td><a href="design_ALU_Behavioral_vcc8qu3b-d.htm">Side Data</a></td>
<td class="grActive"><a href="design_ALU_Behavioral_vcc8qu3b-h.htm">Generated HDL</a></td>
</tr></table>
<br>
<pre class="DefaultText">
<span class="DefaultMargin">    1  </span><span class="DefaultComment">--------------------------------------------------------------------------------</span>
<span class="DefaultMargin">    2  </span><span class="DefaultComment">-- Object        : Architecture design.ALU.Behavioral</span>
<span class="DefaultMargin">    3  </span><span class="DefaultComment">-- Last modified : Fri Dec 13 09:00:34 2024</span>
<span class="DefaultMargin">    4  </span><span class="DefaultComment">--------------------------------------------------------------------------------</span>
<span class="DefaultMargin">    5  </span>
<span class="DefaultMargin">    6  </span><span class="DefaultGroup1">architecture</span><span class="DefaultText"> Behavioral </span><span class="DefaultGroup1">of</span><span class="DefaultText"> ALU </span><span class="DefaultGroup1">is</span>
<span class="DefaultMargin">    7  </span><span class="DefaultText">    </span><span class="DefaultGroup1">signal</span><span class="DefaultText"> result_temp : </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(31 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0);</span>
<span class="DefaultMargin">    8  </span><span class="DefaultText">    </span><span class="DefaultGroup1">signal</span><span class="DefaultText"> mul_result : </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(63 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0);</span>
<span class="DefaultMargin">    9  </span><span class="DefaultText">    </span><span class="DefaultGroup1">signal</span><span class="DefaultText"> branch_condition : </span><span class="DefaultGroup3">std_logic</span><span class="DefaultText">;</span>
<span class="DefaultMargin">   10  </span><span class="DefaultText">    </span><span class="DefaultGroup1">signal</span><span class="DefaultText"> pc_plus_4 : </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(31 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0);</span>
<span class="DefaultMargin">   11  </span><span class="DefaultText">    </span><span class="DefaultGroup1">signal</span><span class="DefaultText"> is_jal_or_branch : </span><span class="DefaultGroup3">std_logic</span><span class="DefaultText">;</span>
<span class="DefaultMargin">   12  </span><span class="DefaultText">    </span>
<span class="DefaultMargin">   13  </span><span class="DefaultGroup1">begin</span>
<span class="DefaultMargin">   14  </span><span class="DefaultText">    </span><span class="DefaultComment">-- Multiplication calculation</span>
<span class="DefaultMargin">   15  </span><span class="DefaultText">    mul_result &lt;= </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(</span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) * </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1));</span>
<span class="DefaultMargin">   16  </span><span class="DefaultText">    </span>
<span class="DefaultMargin">   17  </span><span class="DefaultText">    </span><span class="DefaultComment">-- Calculate PC + 4</span>
<span class="DefaultMargin">   18  </span><span class="DefaultText">    pc_plus_4 &lt;= </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(resize(</span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(pc), 32) + to_unsigned(4, 32));</span>
<span class="DefaultMargin">   19  </span><span class="DefaultText">    </span>
<span class="DefaultMargin">   20  </span><span class="DefaultText">    result_temp &lt;= </span>
<span class="DefaultMargin">   21  </span><span class="DefaultText">        </span><span class="DefaultComment">-- Original ALU operations (preserved)</span>
<span class="DefaultMargin">   22  </span><span class="DefaultText">        (input_0 </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_1) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;00000&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   23  </span><span class="DefaultText">        (input_0 </span><span class="DefaultGroup1">or</span><span class="DefaultText"> input_1) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;00001&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   24  </span><span class="DefaultText">        </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(</span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) + </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;00010&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   25  </span><span class="DefaultText">        </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(shift_left(</span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0), to_integer(</span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1(4 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0))))) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;00011&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   26  </span><span class="DefaultText">        (input_0 </span><span class="DefaultGroup1">xor</span><span class="DefaultText"> input_1) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;00100&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   27  </span><span class="DefaultText">        </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(</span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) - </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;00110&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   28  </span><span class="DefaultText">        mul_result(31 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;01000&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   29  </span><span class="DefaultText">        </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(shift_right(</span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0), to_integer(</span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1(4 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0))))) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;01001&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   30  </span><span class="DefaultText">        </span><span class="DefaultGroup3">std_logic_vector</span><span class="DefaultText">(shift_right(</span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0), to_integer(</span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1(4 </span><span class="DefaultGroup1">downto</span><span class="DefaultText"> 0))))) </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;01101&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   31  </span><span class="DefaultText">        </span>
<span class="DefaultMargin">   32  </span><span class="DefaultText">        </span><span class="DefaultComment">-- Jump and Link operations (new)</span>
<span class="DefaultMargin">   33  </span><span class="DefaultText">        pc_plus_4 </span><span class="DefaultGroup1">when</span><span class="DefaultText"> operation = </span><span class="DefaultStrings">&quot;10000&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">else</span><span class="DefaultText">  </span><span class="DefaultComment">-- JAL/JALR return address</span>
<span class="DefaultMargin">   34  </span><span class="DefaultText">        </span>
<span class="DefaultMargin">   35  </span><span class="DefaultText">        </span><span class="DefaultComment">-- Branch operations (preserved)</span>
<span class="DefaultMargin">   36  </span><span class="DefaultText">        X</span><span class="DefaultStrings">&quot;00000001&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;00101&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0) &lt; </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">or</span>
<span class="DefaultMargin">   37  </span><span class="DefaultText">                         (operation = </span><span class="DefaultStrings">&quot;01010&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_0 = input_1) </span><span class="DefaultGroup1">or</span>
<span class="DefaultMargin">   38  </span><span class="DefaultText">                         (operation = </span><span class="DefaultStrings">&quot;01011&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_0 /= input_1) </span><span class="DefaultGroup1">or</span>
<span class="DefaultMargin">   39  </span><span class="DefaultText">                         (operation = </span><span class="DefaultStrings">&quot;01100&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) &gt;= </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">or</span>
<span class="DefaultMargin">   40  </span><span class="DefaultText">                         (operation = </span><span class="DefaultStrings">&quot;01110&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) &lt; </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">or</span>
<span class="DefaultMargin">   41  </span><span class="DefaultText">                         (operation = </span><span class="DefaultStrings">&quot;01111&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0) &gt;= </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">else</span>
<span class="DefaultMargin">   42  </span><span class="DefaultText">        X</span><span class="DefaultStrings">&quot;00000000&quot;</span><span class="DefaultText">;</span>
<span class="DefaultMargin">   43  </span>
<span class="DefaultMargin">   44  </span><span class="DefaultText">    </span><span class="DefaultComment">-- Branch Condition Logic (preserved)</span>
<span class="DefaultMargin">   45  </span><span class="DefaultText">    branch_condition &lt;= </span>
<span class="DefaultMargin">   46  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;01010&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_0 = input_1) </span><span class="DefaultGroup1">else</span><span class="DefaultText">     </span><span class="DefaultComment">-- BEQ</span>
<span class="DefaultMargin">   47  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;01011&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_0 /= input_1) </span><span class="DefaultGroup1">else</span><span class="DefaultText">    </span><span class="DefaultComment">-- BNE</span>
<span class="DefaultMargin">   48  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;01110&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) &lt; </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">else</span><span class="DefaultText">   </span><span class="DefaultComment">-- BLT</span>
<span class="DefaultMargin">   49  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;01100&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) &gt;= </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">else</span><span class="DefaultText">  </span><span class="DefaultComment">-- BGE</span>
<span class="DefaultMargin">   50  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;00101&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0) &lt; </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">else</span><span class="DefaultText">  </span><span class="DefaultComment">-- BLTU</span>
<span class="DefaultMargin">   51  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;01111&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0) &gt;= </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">else</span><span class="DefaultText"> </span><span class="DefaultComment">-- BGEU    </span>
<span class="DefaultMargin">   52  </span><span class="DefaultText">        </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;10000&quot;</span><span class="DefaultText"> ) </span><span class="DefaultGroup1">else</span><span class="DefaultText"> </span><span class="DefaultComment">-- JAL OR JALR          </span>
<span class="DefaultMargin">   53  </span><span class="DefaultText">            </span>
<span class="DefaultMargin">   54  </span><span class="DefaultText">            </span>
<span class="DefaultMargin">   55  </span><span class="DefaultText">            </span>
<span class="DefaultMargin">   56  </span><span class="DefaultText">        </span><span class="DefaultStrings">'0'</span><span class="DefaultText">;</span>
<span class="DefaultMargin">   57  </span>
<span class="DefaultMargin">   58  </span><span class="DefaultText">  </span><span class="DefaultComment">-- Branch Detection Logic (only when branch condition is true)</span>
<span class="DefaultMargin">   59  </span><span class="DefaultText">is_jal_or_branch &lt;= </span>
<span class="DefaultMargin">   60  </span><span class="DefaultText">    </span><span class="DefaultStrings">'1'</span><span class="DefaultText"> </span><span class="DefaultGroup1">when</span><span class="DefaultText"> (operation = </span><span class="DefaultStrings">&quot;01010&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_0 = input_1) </span><span class="DefaultGroup1">or</span><span class="DefaultText">     </span><span class="DefaultComment">-- BEQ</span>
<span class="DefaultMargin">   61  </span><span class="DefaultText">              (operation = </span><span class="DefaultStrings">&quot;01011&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> input_0 /= input_1) </span><span class="DefaultGroup1">or</span><span class="DefaultText">    </span><span class="DefaultComment">-- BNE</span>
<span class="DefaultMargin">   62  </span><span class="DefaultText">              (operation = </span><span class="DefaultStrings">&quot;01110&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) &lt; </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">or</span><span class="DefaultText">   </span><span class="DefaultComment">-- BLT</span>
<span class="DefaultMargin">   63  </span><span class="DefaultText">              (operation = </span><span class="DefaultStrings">&quot;01100&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_0) &gt;= </span><span class="DefaultGroup3">signed</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">or</span><span class="DefaultText">  </span><span class="DefaultComment">-- BGE</span>
<span class="DefaultMargin">   64  </span><span class="DefaultText">              (operation = </span><span class="DefaultStrings">&quot;00101&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0) &lt; </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1)) </span><span class="DefaultGroup1">or</span><span class="DefaultText">  </span><span class="DefaultComment">-- BLTU</span>
<span class="DefaultMargin">   65  </span><span class="DefaultText">              (operation = </span><span class="DefaultStrings">&quot;01111&quot;</span><span class="DefaultText"> </span><span class="DefaultGroup1">and</span><span class="DefaultText"> </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_0) &gt;= </span><span class="DefaultGroup3">unsigned</span><span class="DefaultText">(input_1))    </span><span class="DefaultComment">-- BGEU</span>
<span class="DefaultMargin">   66  </span><span class="DefaultText">    </span><span class="DefaultGroup1">else</span><span class="DefaultText"> </span><span class="DefaultStrings">'0'</span><span class="DefaultText">;</span>
<span class="DefaultMargin">   67  </span>
<span class="DefaultMargin">   68  </span><span class="DefaultText">    </span><span class="DefaultComment">-- Output assignments</span>
<span class="DefaultMargin">   69  </span><span class="DefaultText">    ALU_output &lt;= result_temp;</span>
<span class="DefaultMargin">   70  </span><span class="DefaultText">    zero_flag &lt;= branch_condition;</span>
<span class="DefaultMargin">   71  </span><span class="DefaultText">    JALorBRANCH &lt;= is_jal_or_branch;</span>
<span class="DefaultMargin">   72  </span>
<span class="DefaultMargin">   73  </span><span class="DefaultGroup1">end</span><span class="DefaultText"> </span><span class="DefaultGroup1">architecture</span><span class="DefaultText"> Behavioral ; </span><span class="DefaultComment">-- of ALU</span>
<span class="DefaultMargin">   74  </span>
</pre>
</body>
</html>
